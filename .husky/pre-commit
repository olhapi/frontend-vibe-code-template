#!/bin/sh
# Save what was staged
STAGED_FILES=$(git diff --cached --name-only)

npm run format
npm run update-structure
npx ultracite format

# Reset and re-add only what was originally staged to not commit everything
git reset
for file in $STAGED_FILES; do
    git add -A "$file" 2>/dev/null || true
done

# Add project structure changes
git add project-structure.md
